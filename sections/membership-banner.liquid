{%- liquid
  assign country_codes = section.settings.country_code | split: ','
  assign exclude_country_codes = section.settings.exclude_country_code | split: ','
  assign should_show_banner = false

  if section.settings.country_code == '' and section.settings.exclude_country_code == ''
    assign should_show_banner = true
  else
    assign is_excluded = false
    for exclude_code in exclude_country_codes
      if localization.country.iso_code == exclude_code
        assign is_excluded = true
        break
      endif
    endfor

    unless is_excluded
      if section.settings.country_code == ''
        assign should_show_banner = true
      else
        for code in country_codes
          if localization.country.iso_code == code
            assign should_show_banner = true
            break
          endif
        endfor
      endif
    endunless
  endif
-%}

{% if should_show_banner %}
  {%- liquid
    assign sc_id = '#shopify-section-' | append: section.id
    assign image_desktop = section.settings.section_image
    assign image_mobile = section.settings.section_image_mobile
    assign banner = '.img-banner-' | append: section.id
    assign unique_id_ = section.id | remove: '-'
    assign unique_id = unique_id_ | remove: '_'

    assign breakpoint = section.settings.breakpoint
    assign min_breakpoint = breakpoint
    assign max_breakpoint = breakpoint | plus: 1

    if image_desktop.aspect_ratio < 1
      assign aspect_ratio_desktop = '105%'
    elsif image_desktop.aspect_ratio == 1
      assign aspect_ratio_desktop = '100%'
    elsif image_desktop.aspect_ratio >= 1.2 and image_desktop.aspect_ratio <= 1.4
      assign aspect_ratio_desktop = '100%'
    elsif image_desktop.aspect_ratio >= 1.6 and image_desktop.aspect_ratio <= 1.8
      assign aspect_ratio_desktop = '75%'
    elsif image_desktop.aspect_ratio >= 1.81 and image_desktop.aspect_ratio <= 2.4
      assign aspect_ratio_desktop = '75.25%'
    elsif image_desktop.aspect_ratio >= 2.41 and image_desktop.aspect_ratio <= 2.8
      assign aspect_ratio_desktop = '56.25%'
    elsif image_desktop.aspect_ratio >= 2.81
      assign aspect_ratio_desktop = '56.25%'
    endif
  -%}

  {% comment %} STYLES {% endcomment %}

  <style type='text/css'>
    .membership-button {
        position: relative;
        margin-top: 1rem;
      }

      .banner .spinner {
        margin-left: 5px;
      }

      .banner .spinner {
        top: 1rem;
        left: 1rem;
      }

      @media screen and ( min-width: {{ max_breakpoint }}px ) {
        {{ banner }} .mobile-image {
          display: none!important;
        }
      }

      @media screen and ( max-width: {{ min_breakpoint }}px ) {
        {{ banner }} .desktop-image {
          display: none!important;
        }
      }

      {% if localization.country.iso_code == 'US' %}
        .international {
          display: none !important;
        }
      {% else %}
        .us_only {
          display: none !important;
        }
      {% endif %}

      {%- if section.settings.section_height == 'adapt' and section.settings.media_position == 'unset' and section.settings.enable_absolute == true -%}
        @media screen and ( max-width: {{ min_breakpoint }}px ) {

          {{ banner }} .mobile-image {
            right: -4rem!important;
            left: 0!important;
            transform: scale(1)!important;
          }

          {{ banner }} > .img-banner-block.img-banner-media:after {
            position: relative!important;
            content: " ";
            padding-bottom: 110%!important;
            display: block;
          }

        }
      {%- endif -%}

        {% comment %} ---# TOP LEVEL SECTION #--- {% endcomment %}

        {%- if section.settings.full_width != true -%}
          @media screen and ( min-width: {{ min_breakpoint | plus: 1 }}px ) {
            {{ sc_id }} {
              max-width: var(--container-width);
              margin-left: auto;
              margin-right: auto;
              padding-left: 1.25rem;
              padding-left: var(--edge-space);
              padding-right: 1.25rem;
              padding-right: var(--edge-space);
            }
          }
        {%- endif -%}

        {%- if section.settings.full_width == true -%}
          {{ sc_id }} {
            max-width: 100vw !important;
            padding-left: 0 !important;
            padding-right: 0 !important;
          }
        {%- endif -%}

        {{ sc_id }} {
          padding-top: {{ section.settings.padding_top | times: 0.50 }}px;
          padding-bottom: {{ section.settings.padding_bottom | times: 0.50 }}px;
        }

        @media screen and (min-width: {{ max_breakpoint }}px) {
          {{ sc_id }} {
            padding-top: {{ section.settings.padding_top }}px;
            padding-bottom: {{ section.settings.padding_bottom }}px;
          }
        }

        {% comment %} ---# IMAGE SECTION #--- {% endcomment %}

        {{ banner }} {
          padding-top: {{ section.settings.inner_padding_top | times: 0.50 }}px;
          padding-bottom: {{ section.settings.inner_padding_bottom | times: 0.50 }}px;
        }

        @media screen and (min-width: {{ max_breakpoint }}px) {
          {{ banner }} {
            padding-top: {{ section.settings.inner_padding_top }}px;
            padding-bottom: {{ section.settings.inner_padding_bottom }}px;
          }
        }

        {{ sc_id }} .img-banner {
          position: relative;
          overflow: hidden;
          display: -webkit-box;
          display: -ms-flexbox;
          display: flex;
        }

        @media screen and ( min-width: {{ max_breakpoint }}px ) {
          {{ sc_id }} .d-rr {
            flex-direction: row-reverse;
          }
        }

        @media screen and ( max-width: {{ min_breakpoint }}px ) {
          {{ sc_id }} .img-banner {
            justify-content: center;
            align-items: center;
          }
          {{ sc_id }} .m-vrt {
            flex-direction: column;
          }
          {{ sc_id }} .m-cr {
            flex-direction: column-reverse;
          }
        }

        @media screen and ( min-width: {{ max_breakpoint }}px ) {

          {{ sc_id }} .img-banner {
            margin-left: auto;
            margin-right: auto;
          }

          {{ banner }} {
            max-width: {{ section.settings.section_max_width }}px;
            width: 100%;
          }
        }

        {% if section.settings.section_height == "550" or section.settings.section_height == "700" or section.settings.section_height == "990" or section.settings.section_height == "1200" %}

          @media screen and ( min-width: {{ max_breakpoint }}px ) {

            {{ banner }} {
              max-height: {{ section.settings.section_height }}px;
              min-height: {{ section.settings.section_height }}px!important;
              display: -webkit-box;
              display: -ms-flexbox;
              display: flex;
            }

            {{ banner }} .img-banner-block.img-banner-media {
              position: absolute!important;
              height: -webkit-fill-available;
              height: 100%;
            }
          }

        {% endif %}

        {% if section.settings.section_height == "full" %}

          @media screen and ( min-width: {{ max_breakpoint }}px ) {

            {{ banner }} {
              {%- if section.settings.section_height == "full" and section.settings.mobile_positioning == 'overlay' -%}
                height: calc(100vh - 116.5px)!important;
              {%- elsif section.settings.section_height == "full" and section.settings.mobile_positioning == 'after' -%}
                height: calc(100vh - 116.5px)!important;
              {%- endif -%}
            }
          }

          @media screen and ( max-width: {{ min_breakpoint }}px ) {

            {{ banner }} {
              {%- if section.settings.section_height == "full" and section.settings.mobile_positioning == 'overlay' -%}
                height: calc(100vh - 102px)!important;
              {%- elsif section.settings.section_height == "full" and section.settings.mobile_positioning == 'after' -%}
                height: calc(100vh - 102px)!important;
              {%- endif -%}
            }

            {{ banner }} > *:not(style) {
              display: -webkit-box;
              display: -ms-flexbox;
              display: flex;
              -webkit-box-align: center;
                -ms-flex-align: center;
                    align-items: center;
              {%- if section.settings.section_height == "full" and section.settings.mobile_positioning == 'overlay' -%}
                height: calc(80vh - 100px);
                {%- elsif section.settings.section_height == "full" and section.settings.mobile_positioning == 'after' -%}
                height: auto;
                {%- else -%}
              {%- endif -%}
            }
          }

        {% endif %}

        {% if section.settings.section_height == "adapt" %}

          @media screen and ( max-width: {{ min_breakpoint }}px ) {

            {{ banner }} {
                height: {{ section.settings.section_height_mobile }}px!important;
            }
          }

        {% endif %}

        {% comment %} ---# MEDIA #--- {% endcomment %}

        {{ sc_id }} .img-banner-block  {
          position: relative;
          display: -webkit-box;
          display: -ms-flexbox;
          display: flex;
        }

        @media screen and ( min-width: {{ max_breakpoint }}px ) {
          {{ banner }}.small > .img-banner-media { width: 30%; }
          {{ banner }}.medium > .img-banner-media { width: 50%; }
          {{ banner }}.large > .img-banner-media { width: 70%; }
          {{ banner }}.full > .img-banner-media { width: 100%; }
        }

        {%- if section.settings.media_position == 'normal' -%}

          @media screen and ( min-width: {{ max_breakpoint }}px ) {
            {{ banner }}.small > .img-banner-media { -webkit-box-align: end; -ms-flex-pack: end; justify-content: end; }
            {{ banner }}.medium > .img-banner-media { -webkit-box-align: end; -ms-flex-pack: end; justify-content: end; }
            {{ banner }}.large > .img-banner-media { -webkit-box-align: end; -ms-flex-pack: end; justify-content: end; }
          }

          {%- elsif section.settings.media_position == 'reverse' -%}

          @media screen and ( min-width: {{ max_breakpoint }}px ) {
            {{ banner }}.small > .img-banner-media { -webkit-box-align: start; -ms-flex-pack: start; -webkit-box-pack: start; justify-content: start; }
            {{ banner }}.medium > .img-banner-media { -webkit-box-align: start; -ms-flex-pack: start; -webkit-box-pack: start; justify-content: start; }
            {{ banner }}.large > .img-banner-media { -webkit-box-align: start; -ms-flex-pack: start; -webkit-box-pack: start; justify-content: start; }
          }

        {%- endif -%}

        @media screen and ( min-width: {{ max_breakpoint }}px ) {

          {%- if section.settings.enable_max_media_width and section.settings.enable_center_media -%}

            {{ sc_id }} .img-banner-block > img {
              position: relative;
              max-width: unset;
              left: 50%;
              -webkit-transform: translateX(-50%);
                  -ms-transform: translateX(-50%);
                      transform: translateX(-50%);
            }

          {%- endif -%}

          {{ banner }} .img-banner-block > img {
            {% if section.settings.enable_max_media_width and section.settings.enable_center_media %}
              position: absolute;
            {% else %}
            position: relative;
            {% endif %}
            height: auto;
            min-width: -webkit-fill-available;
          }
        }

        {{ banner }} .img-banner-block > img {
          height: auto;
          width: 100%;
        }

        {%- if section.settings.section_height == "full" -%}

          @media screen and ( min-width: {{ max_breakpoint }}px ) {

            {{ banner }} .img-banner-block > img {
              -o-object-fit: cover;
                object-fit: cover;
              width: -webkit-fill-available;
              height: auto;
            }
          }

        {% endif %}

        {%- if section.settings.section_height == "550" or section.settings.section_height == "700" or section.settings.section_height == "990" or section.settings.section_height == "1200" -%}

          @media screen and ( min-width: {{ max_breakpoint }}px ) {

            {{ sc_id }} .img-banner-block > img {
              position: relative;
              -o-object-fit: cover;
                object-fit: cover;
              width: -webkit-fill-available;
              max-width: unset;
              left: 50%;
              -webkit-transform: translateX(-50%);
                  -ms-transform: translateX(-50%);
                      transform: translateX(-50%);
            }
          }

        {%- endif -%}

        @media screen and ( min-width: {{ max_breakpoint }}px ) {

          {{ banner }} .img-banner-block.img-banner-media {
            padding-left: {{ section.settings.media_margin_left }}px!important;
            padding-right: {{ section.settings.media_margin_right }}px!important;
            padding-top: {{ section.settings.media_margin_top }}px!important;
            padding-bottom: {{ section.settings.media_margin_bottom }}px!important;
          }
        }

        @media screen and ( max-width: {{ min_breakpoint }}px ) {

          {{ banner }} .img-banner-block.img-banner-media,
          {{ banner }} .img-banner-content {
            width: 100%;
          }
        }

        {% comment %} ---# CONTENT #--- {% endcomment %}

        {{ sc_id }} .img-banner .img-banner-content {
          padding-top: 0rem;
          padding-bottom: 0rem;
          height: -webkit-fit-content;
          height: -moz-fit-content;
          height: fit-content;
          width: -webkit-max-content;
          width: -moz-max-content;
          width: max-content;
          max-width: 100%;
          position: absolute;
        }

        {%- if section.settings.enable_absolute != true and section.settings.media_position != 'unset' -%}

          @media screen and ( min-width: {{ max_breakpoint }}px ) {

            {{ sc_id }} .img-banner .img-banner-content {
              position: absolute;
              top: 0;
              bottom: 0;
              height: -webkit-fill-available;
              height: 100%;
              align-items: center;
            {% if section.settings.media_position == 'normal' %}
              left: 50%;
            {% elsif section.settings.media_position == 'reverse' %}
              right: 50%;
              width: 50%;
            {% endif %}
            }

          }

        {%- endif -%}

        {%- if section.settings.enable_absolute != true -%}

          @media screen and ( min-width: {{ max_breakpoint }}px ) {
            {{ banner }}.small,
            {{ banner }}.medium,
            {{ banner }}.large {
              display: -webkit-box;
              display: -ms-flexbox;
              display: flex;
              height: auto;
              align-items: center;
              -webkit-box-align: center;
                -ms-flex-align: center;
                    align-items: center;
            }
            {{ banner }}.small > .img-banner-content { width: 70%; }
            {{ banner }}.medium > .img-banner-content { width: 50%; }
            {{ banner }}.large > .img-banner-content { width: 30%; }
            {{ banner }}.full > .img-banner-content { position: absolute; top: 50%; left: 50%; -webkit-transform: translate(-50%, -50%); -ms-transform: translate(-50%, -50%); transform: translate(-50%, -50%); }
          }

        {%- else -%}

          @media screen and ( min-width: {{ max_breakpoint }}px ) {
            {{ banner }} > .img-banner-content {
              position: absolute!important;
              {%- if section.settings.enable_distance_top == true -%}top: {{ section.settings.content_top }}%;{%- endif -%}
              {%- if section.settings.enable_distance_bottom == true -%}bottom: {{ section.settings.content_bottom }}%;{%- endif -%}
              {%- if section.settings.enable_distance_top != true and section.settings.enable_distance_bottom != true and section.settings.enable_distance_left != true and section.settings.enable_distance_right != true -%} top: 50%; left: 50%; -webkit-transform: translate(-50%, -50%); -ms-transform: translate(-50%, -50%); transform: translate(-50%, -50%); {%- endif -%}
            }
          }

          @media screen and ( min-width: {{ max_breakpoint }}px ) {
            {{ banner }} > .img-banner-content {
              position: absolute!important;
              {%- if section.settings.enable_distance_left == true -%}left: {{ section.settings.content_left }}%;{%- endif -%}
              {%- if section.settings.enable_distance_right == true -%}right: {{ section.settings.content_right }}%;{%- endif -%}
            }
          }

        {%- endif -%}

        {%- if section.settings.mobile_positioning == 'overlay' -%}

          @media screen and (max-width: {{ min_breakpoint }}px) {

            {{ banner }} > .img-banner-block.img-banner-media:after {
              position: relative!important;
              content: " ";
              padding-bottom: {{ aspect_ratio_desktop }};
              display: block;
            }

            {{ banner }} > .img-banner-block.img-banner-content {
              position: absolute;
              z-index: 2;
              display: flex;
              align-items: center;
              justify-content: center;
              top: 0;
              height: -webkit-fill-available;
              {% if section.settings.text_position_mobile == 'center' %}
                -webkit-transform: translateX(-50%);
                    -ms-transform: translateX(-50%);
                        transform: translateX(-50%);
                padding-left: 1rem;
                padding-right: 1rem;
              {% elsif section.settings.text_position_mobile == 'left' or section.settings.text_position_mobile == 'right' %}
                padding-left: 2rem;
                padding-right: 2rem;
              {% endif %}
            }

            {{ banner }} > .img-banner-block.img-banner-media > img {
              top: 0;
              left: 50%;
              -webkit-transform: translateX(-50%);
              -ms-transform: translateX(-50%);
              transform: translateX(-50%);
              max-width: initial!important;
              height: auto;
              width: 100%;
            }
          }
        {%- endif -%}

        {% if section.settings.mobile_positioning != 'after' %}
        @media screen and ( max-width: {{ min_breakpoint }}px ) {
          {{ banner }} .img-banner-content {
            top: {{ section.settings.content_top_mobile }}%!important;
            -webkit-transform: translateY(-50%)!important;
            -ms-transform: translateY(-50%)!important;
            transform: translateY(-50%)!important;
          }
        }
        {% endif %}

        {% if section.settings.mobile_positioning == 'after' %}
          @media screen and ( max-width: {{ min_breakpoint }}px ) {
            {{ banner }} .img-banner-content {
              position: relative !important;
              padding-top: 40px !important;
              padding-bottom: 40px !important;
            }
            {{ banner }} .img-banner-overlay {
              opacity: 0;
            }
          }
        {% endif %}

        {{ banner }} .img-banner-content,
        {{ banner }} .img-banner-block-content {
          margin-left: auto;
          margin-right: auto;
        }

        {{ banner }} .img-banner-block-content {
          padding: {{ section.settings.content_padding_dt }}rem;
        }

        @media screen and ( min-width: {{ max_breakpoint }}px ) {

          {% if section.settings.content_fit == false %}
            {{ banner }} .img-banner-block-content {
              width: {{ section.settings.content_width }}vw;
              display: flex;
              flex-direction: column;
              padding: {{ section.settings.content_padding_mb }}rem;
            }
          {% endif %}
        }

        @media screen and ( max-width: {{ min_breakpoint }}px ) {

          {{ banner }} .img-banner-content {
            text-align: {{ section.settings.text_position_mobile }};
          }
          {{ banner }} .img-banner-content p {
            {% if section.settings.text_position_mobile == 'center' -%}
              margin-left: auto!important;
              margin-right: auto!important;
            {% endif %}
          }
        }

        @media screen and ( min-width: {{ max_breakpoint }}px ) {

          {{ banner }} .img-banner-content {
            text-align: {{ section.settings.text_position }};
            {% if section.settings.text_position == 'center' %}
              margin-left: auto;
              margin-right: auto;
            {% endif %}
          }
        }

        @media screen and ( max-width: {{ min_breakpoint }}px ) {

          {{ banner }} .img-banner-content {
            width: 95vw!important;
          }
          {{ banner }} .img-banner-content .img-banner-block-content {
            width: 100%;
          }
        }
  </style>

  {% comment %} CONTENT {% endcomment %}
  <div
    class='img-banner img-banner-{{ section.id }} {{ section.settings.international_banner }}{% if section.settings.media_position == 'reverse' %} d-rr{% endif %} m-vrt{% if section.settings.reverse_mobile != true %} m-cr{% endif %} {{ section.settings.media_size }}'
    style='background-color: {{ section.settings.section_bg_color }};{% if section.settings.hidden %} display: none;{% endif %}'
  >
    <div class='img-banner-block img-banner-media'>
      {% if section.settings.video != null %}
        {% assign video_id = section.settings.video.id %}
        <deferred-media
          class='video-section__media deferred-media no-js-hidden gradient global-media-settings media-fit-cover'
          style='--ratio-percent: {{ section.settings.aspect_ratio}}%;'
          data-media-id='{{ video_id }}'
        >
          {{
            section.settings.video
            | video_tag: autoplay: true, loop: true, controls: false, muted: true
          }}
        </deferred-media>
      {% elsif section.settings.section_image != null %}
        {% comment %}theme-check-disable ImgLazyLoading{% endcomment %}
        {%- liquid
          assign image_desktop_height = image_desktop.width | divided_by: image_desktop.aspect_ratio
          if image_mobile == null
            assign image_desktop_class = ''
          else
            assign image_desktop_class = 'desktop-image'
          endif
          if section.settings.media_size == 'small'
            assign sizes_desktop = '30vw'
          elsif section.settings.media_size == 'medium'
            assign sizes_desktop = '50vw'
          elsif section.settings.media_size == 'large'
            assign sizes_desktop = '70vw'
          elsif section.settings.media_size == 'full'
            assign sizes_desktop = '100vw'
          endif
          if section.settings.enable_lazyload
            assign loading = 'lazy'
          else
            assign loading = 'eager'
          endif
        -%}
        {{
          image_desktop
          | image_url: width: 3000
          | image_tag:
            width: image_desktop.width,
            height: image_desktop_height,
            class: image_desktop_class,
            sizes: sizes_desktop,
            loading: loading,
            widths: '165, 265, 360, 535, 750, 1070, 1500, 1780, 2000, 3000, 3800',
            alt: image_desktop.alt
          | escape
        }}

        {% unless image_mobile == null %}
          {%- liquid
            assign image_mobile_height = image_mobile.width | divided_by: image_mobile.aspect_ratio
            assign image_mobile_class = 'mobile-image'
            assign sizes_mobile = '100vw'
          -%}
          {{
            image_mobile
            | image_url: width: 1500
            | image_tag:
              width: image_mobile.width,
              height: image_mobile_height,
              class: image_mobile_class,
              sizes: sizes_mobile,
              loading: loading,
              widths: '165, 265, 360, 535, 750, 1070, 1500, 1780, 2000, 3000',
              alt: image_mobile.alt
            | escape
          }}
        {% endunless %}
        {% comment %}theme-check-enable ImgLazyLoading{% endcomment %}
      {% else %}
        {% if section.settings.media_size == 'small' or section.settings.media_size == 'medium' %}
          {{ 'image' | placeholder_svg_tag: 'placeholder-svg placeholder' }}
        {% else %}
          {{ 'lifestyle-2' | placeholder_svg_tag }}
        {% endif %}
      {% endif %}
    </div>
    {% if section.settings.mobile_overlay == true %}
      <style type='text/css'>
        @media screen and (max-width: {{ min_breakpoint }}px) {
          {{ sc_id }} .img-banner-overlay {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: 1;
            background-color: {{ section.settings.mobile_overlay_color }};
            opacity: {{ section.settings.mobile_overlay_opacity }};
          }
        }
      </style>
      <div class='img-banner-overlay'></div>
      {%- if section.settings.banner_link != null -%}
        <style type='text/css'>
          {{ sc_id }} .img-banner-link {
            position: absolute;
            top: 0;
            left: 0;
            width: 100vw;
            height: 100%;
            z-index: 2;
          }
        </style>
        <a
          class='img-banner-link'
          href='{{ section.settings.banner_link }}'
          title='{{ section.settings.banner_link_title }}'
        ></a>
      {%- endif -%}
    {% endif %}
    <div class='img-banner-block img-banner-content' style='z-index: 2;'>
      <div class='img-banner-block-content'>
        {%- for block in section.blocks -%}
          {%- case block.type -%}
            {%- when 'heading' -%}
              {%- assign unique_id = block.id | remove: '-' | remove: '_' -%}
              {% render 'tc-heading',
                title: block.settings.title,
                heading_level: block.settings.heading_level,
                heading_font: block.settings.heading_font,
                heading_size: block.settings.heading_size,
                heading_color: block.settings.heading_color,
                heading_color_inverse: block.settings.heading_color_inverse,
                heading_margin_top: block.settings.heading_margin_top,
                heading_margin_bottom: block.settings.heading_margin_bottom,
                heading_underline: block.settings.heading_underline,
                line_break_dot: block.settings.line_break_dot,
                link: section.settings.banner_link,
                block_id: unique_id
              %}
            {%- when 'text' -%}
              {%- assign unique_id = block.id | remove: '-' | remove: '_' -%}
              {% render 'tc-paragraph',
                text: block.settings.paragraph,
                text_font: block.settings.paragraph_font,
                text_style: block.settings.paragraph_style,
                text_color: block.settings.paragraph_color,
                text_color_inverse: block.settings.paragraph_color_inverse,
                text_margin_top: block.settings.paragraph_margin_top,
                text_margin_bottom: block.settings.paragraph_margin_bottom,
                block_id: unique_id
              %}
            {%- when 'membership' -%}
              <style>
                .featured-product.banner button,
                .featured-product.banner button + a {
                  max-width: 513.45px;
                  width: 100%;
                  padding: 0 2rem !important;
                  font-style: normal;
                  font-size: 24px;
                  line-height: 50px;
                  letter-spacing: 0.05em;
                  justify-content: center;
                  margin-left: auto;
                  display: block;
                  margin-right: auto;
                }

                .featured-product.banner a.button,
                .featured-product.banner button + a {
                  text-align: center !important;
                  margin-left: auto;
                  margin-right: auto;
                }

                .featured-product.banner button:after {
                  content: '$99/yr';
                  position: absolute;
                  right: 1.5rem;
                  font-weight: 400;
                  font-size: 0.75rem;
                  text-transform: none;
                  top: 0;
                }

                @media screen and (max-width: 769px) {
                  .featured-product.banner a.button,
                  .featured-product.banner button,
                  .featured-product.banner button + a {
                    max-width: 80vw;
                    max-height: 50px;
                    line-height: auto;
                    width: 80vw;
                    font-size: 16px;
                  }
                }
              </style>
              {% assign not_in_cart = true %}
              {% for item in cart.items %}
                {% if item.product.id == block.settings.membership_product.id %}
                  {% assign not_in_cart = false %}
                  {% break %}
                {% endif %}
              {% endfor %}
              <div class='featured-product banner'>
                {% unless customer and customer.tags contains 'inveterate-subscriber' %}
                  <div class='featured-product'>
                    {% render 'add-subscription-button',
                      product: block.settings.membership_product,
                      product_form_id: block.settings.membership_product.first_available_variant.id,
                      selling_plan_id: block.settings.membership_product.selected_or_first_available_selling_plan_allocation.selling_plan.id,
                      button_label: block.settings.button_label,
                      membership_image: block.settings.membership_image,
                      function_id: unique_id,
                      is_cart: false,
                      is_product_page: false,
                      bg_color: block.settings.button_bg_color,
                      color: block.settings.button_color,
                      not_in_cart: not_in_cart
                    %}
                  </div>
                {% else %}
                  <a
                    href='/account'
                    class='checkoutMembership button primary membership-button membership-in-cart'
                    >Manage your membership</a
                  >
                {% endunless %}
              </div>
          {%- endcase -%}
        {%- endfor -%}
      </div>
    </div>
  </div>
{% endif %}

{% comment %} SCHEMA {% endcomment %}

{% schema %}
{
  "name": "Membership Banner",
  "tag": "section",
  "class": "section section-img-banner",
  "settings": [
    {
      "type": "header",
      "content": "Geolocation"
    },
    {
      "type": "text",
      "id": "country_code",
      "label": "Country code",
      "info": "Enter the country code for the country you want to show the banner to. You can have multiple country codes, just separate them with a comma. Example: US,CA,GB. Leave empty to show to all countries."
    },
    {
      "type": "text",
      "id": "exclude_country_code",
      "label": "Exclude country code",
      "info": "Enter the country code for the countries you DON'T want to show the banner to. You can have multiple country codes, just separate them with a comma. Example: US,CA,GB"
    },
    {
      "type": "header",
      "content": "Section specific"
    },
    {
      "type": "checkbox",
      "id": "hidden",
      "label": "Hide for test",
      "default": false
    },
    {
      "type": "color",
      "id": "section_bg_color",
      "label": "Section background color",
      "default": "#ffffff"
    },
    {
      "type": "select",
      "id": "content_style",
      "options": [
        {
          "value": "style-1",
          "label": "Style 1"
        },
        {
          "value": "style-2",
          "label": "Style 2"
        },
        {
          "value": "style-3",
          "label": "Style 3"
        }
      ],
      "default": "style-1",
      "label": "Banner content style",
      "info": "Coming soon. To standardize the content style, we need to creat 3 different styles customizable through the global theme settings. You can then choose between them."
    },
    {
      "type": "header",
      "content": "Section layout",
      "info": "In this section you can edit section specific attributes. Feel free to play around and test different combinations!"
    },
    {
      "type": "checkbox",
      "id": "full_width",
      "label": "Make section full width",
      "default": true
    },
    {
      "type": "range",
      "id": "breakpoint",
      "min": 480,
      "max": 1200,
      "step": 8,
      "unit": "px",
      "label": "Layout Breakpoint",
      "default": 768
    },
    {
      "type": "range",
      "id": "section_max_width",
      "min": 1000,
      "max": 4000,
      "step": 100,
      "unit": "px",
      "label": "Section width (Desktop)",
      "info": "Section width (Desktop)",
      "default": 4000
    },
    {
      "type": "select",
      "id": "section_height",
      "options": [
        {
          "value": "full",
          "label": "Full screen"
        },
        {
          "value": "adapt",
          "label": "Adapt"
        },
        {
          "value": "1200",
          "label": "X-large"
        },
        {
          "value": "990",
          "label": "Large"
        },
        {
          "value": "700",
          "label": "Medium"
        },
        {
          "value": "550",
          "label": "Small"
        }
      ],
      "default": "adapt",
      "label": "Section height"
    },
    {
      "type": "select",
      "id": "media_position",
      "options": [
        {
          "value": "normal",
          "label": "Left"
        },
        {
          "value": "reverse",
          "label": "Right"
        },
        {
          "value": "unset",
          "label": "Unset (When media size is 100%)"
        }
      ],
      "default": "reverse",
      "label": "Media position"
    },
    {
      "type": "select",
      "id": "media_size",
      "options": [
        {
          "value": "small",
          "label": "30%"
        },
        {
          "value": "medium",
          "label": "50%"
        },
        {
          "value": "large",
          "label": "70%"
        },
        {
          "value": "full",
          "label": "100%"
        }
      ],
      "default": "medium",
      "label": "Media size"
    },
    {
      "type": "url",
      "id": "banner_link",
      "label": "Full section link"
    },
    {
      "type": "text",
      "id": "banner_link_title",
      "label": "Banner link titlle",
      "default": "True Classic® Sale"
    },
    {
      "type": "header",
      "content": "Section padding"
    },
    {
      "type": "range",
      "id": "padding_top",
      "min": 0,
      "max": 100,
      "step": 4,
      "unit": "px",
      "label": "Top padding",
      "default": 0
    },
    {
      "type": "range",
      "id": "padding_bottom",
      "min": 0,
      "max": 100,
      "step": 4,
      "unit": "px",
      "label": "Bottom padding",
      "default": 0
    },
    {
      "type": "header",
      "content": "Section inner padding"
    },
    {
      "type": "range",
      "id": "inner_padding_top",
      "min": 0,
      "max": 100,
      "step": 4,
      "unit": "px",
      "label": "Top padding",
      "default": 0
    },
    {
      "type": "range",
      "id": "inner_padding_bottom",
      "min": 0,
      "max": 100,
      "step": 4,
      "unit": "px",
      "label": "Bottom padding",
      "default": 0
    },
    {
      "type": "header",
      "content": "Video"
    },
    {
      "type": "video",
      "id": "video",
      "label": "Video"
    },
    {
      "type": "range",
      "id": "aspect_ratio",
      "min": 50,
      "max": 150,
      "step": 1,
      "unit": "%",
      "label": "Aspect Ratio",
      "default": 50
    },
    {
      "type": "header",
      "content": "Image"
    },
    {
      "type": "image_picker",
      "id": "section_image",
      "label": "Image"
    },
    {
      "type": "image_picker",
      "id": "section_image_mobile",
      "label": "Image mobile"
    },
    {
      "type": "header",
      "content": "Media options",
      "info": "Image margins options. (desktop only)"
    },
    {
      "type": "range",
      "id": "media_margin_left",
      "min": 0,
      "max": 200,
      "step": 4,
      "unit": "px",
      "label": "Media margin left",
      "default": 0
    },
    {
      "type": "range",
      "id": "media_margin_right",
      "min": 0,
      "max": 200,
      "step": 4,
      "unit": "px",
      "label": "Media margin right",
      "default": 0
    },
    {
      "type": "range",
      "id": "media_margin_top",
      "min": 0,
      "max": 200,
      "step": 4,
      "unit": "px",
      "label": "Media margin top",
      "default": 0
    },
    {
      "type": "range",
      "id": "media_margin_bottom",
      "min": 0,
      "max": 200,
      "step": 4,
      "unit": "px",
      "label": "Media margin bottom",
      "default": 0
    },
    {
      "type": "checkbox",
      "id": "enable_lazyload",
      "default": false,
      "label": "Enable lazy loading",
      "info": "Do not enable if section is above the fold for performance."
    },
    {
      "type": "header",
      "content": "Content",
      "info": "Content input and settings."
    },
    {
      "type": "range",
      "id": "content_width",
      "min": 5,
      "max": 100,
      "step": 5,
      "unit": "vw",
      "label": "Content width",
      "default": 40
    },
    {
      "type": "checkbox",
      "id": "content_fit",
      "label": "Enable fit content",
      "info": "This options will override previous content width option.",
      "default": false
    },
    {
      "type": "select",
      "id": "text_position",
      "options": [
        {
          "value": "left",
          "label": "Left"
        },
        {
          "value": "center",
          "label": "Center"
        },
        {
          "value": "right",
          "label": "Right"
        }
      ],
      "default": "left",
      "label": "Content alignment (desktop)"
    },
    {
      "type": "select",
      "id": "text_position_mobile",
      "options": [
        {
          "value": "left",
          "label": "Left"
        },
        {
          "value": "center",
          "label": "Center"
        },
        {
          "value": "right",
          "label": "Right"
        }
      ],
      "default": "center",
      "label": "Content alignment (mobile)"
    },
    {
      "type": "select",
      "id": "content_padding_dt",
      "options": [
        {
          "value": "0",
          "label": "None"
        },
        {
          "value": "1",
          "label": "Small"
        },
        {
          "value": "2",
          "label": "Medium"
        },
        {
          "value": "3",
          "label": "Large"
        }
      ],
      "default": "0",
      "label": "Content padding (desktop)"
    },
    {
      "type": "select",
      "id": "content_padding_mb",
      "options": [
        {
          "value": "0",
          "label": "None"
        },
        {
          "value": "1",
          "label": "Small"
        },
        {
          "value": "2",
          "label": "Medium"
        },
        {
          "value": "3",
          "label": "Large"
        }
      ],
      "default": "0",
      "label": "Content padding (mobile)"
    },
    {
      "type": "paragraph",
      "content": "Enable to let you position the content anywhere in the section container."
    },
    {
      "type": "checkbox",
      "id": "enable_absolute",
      "default": false,
      "label": "Absolute positioning"
    },
    {
      "type": "paragraph",
      "content": "Vertical positioning, select either to set distance from the top or bottom of the container."
    },
    {
      "type": "checkbox",
      "id": "enable_distance_top",
      "default": true,
      "label": "Enable distance top"
    },
    {
      "type": "range",
      "id": "content_top",
      "min": 0,
      "max": 100,
      "step": 2,
      "unit": "%",
      "label": "Distance top",
      "default": 50
    },
    {
      "type": "range",
      "id": "content_top_mobile",
      "min": 0,
      "max": 100,
      "step": 2,
      "unit": "%",
      "label": "Distance top mobile",
      "default": 50
    },
    {
      "type": "checkbox",
      "id": "enable_distance_bottom",
      "default": false,
      "label": "Enable distance bottom"
    },
    {
      "type": "range",
      "id": "content_bottom",
      "min": 0,
      "max": 100,
      "step": 2,
      "unit": "%",
      "label": "Distance bottom",
      "default": 50
    },
    {
      "type": "paragraph",
      "content": "Horizontal positioning, select either to set distance from the left or right of the container."
    },
    {
      "type": "checkbox",
      "id": "enable_distance_left",
      "default": true,
      "label": "Enable distance left"
    },
    {
      "type": "range",
      "id": "content_left",
      "min": 0,
      "max": 100,
      "step": 2,
      "unit": "%",
      "label": "Distance left",
      "default": 50
    },
    {
      "type": "checkbox",
      "id": "enable_distance_right",
      "default": false,
      "label": "Enable distance right"
    },
    {
      "type": "header",
      "content": "Mobile layout"
    },
    {
      "type": "range",
      "id": "content_right",
      "min": 0,
      "max": 100,
      "step": 2,
      "unit": "%",
      "label": "Distance right",
      "default": 50
    },
    {
      "type": "select",
      "id": "mobile_positioning",
      "options": [
        {
          "value": "overlay",
          "label": "Centered over media"
        },
        {
          "value": "after",
          "label": "Block"
        },
        {
          "value": "unset",
          "label": "Unset (experimental)"
        }
      ],
      "default": "after",
      "label": "Mobile positioning"
    },
    {
      "type": "checkbox",
      "id": "reverse_mobile",
      "default": true,
      "label": "Reverse order (mobile)",
      "info": "Works when mobile positioning is set to block, it will show before or after the media."
    },
    {
      "type": "checkbox",
      "id": "mobile_overlay",
      "label": "Overlay on mobile",
      "default": true
    },
    {
      "type": "color",
      "id": "mobile_overlay_color",
      "label": "Overlay color",
      "default": "#000000"
    },
    {
      "type": "range",
      "id": "mobile_overlay_opacity",
      "min": 0,
      "max": 1,
      "step": 0.1,
      "unit": "op",
      "label": "Overlay opacity",
      "default": 0.5
    }
  ],
  "blocks": [
    {
      "type": "heading",
      "name": "Header",
      "settings": [
        {
          "id": "title",
          "type": "text",
          "label": "Heading text",
          "default": "True Classic®"
        },
        {
          "type": "select",
          "id": "heading_level",
          "options": [
            {
              "value": "h1",
              "label": "Level 1"
            },
            {
              "value": "h2",
              "label": "Level 2"
            },
            {
              "value": "h3",
              "label": "Level 3"
            },
            {
              "value": "h4",
              "label": "Level 4"
            },
            {
              "value": "h5",
              "label": "Level 5"
            },
            {
              "value": "h6",
              "label": "Level 6"
            },
            {
              "value": "span",
              "label": "Span"
            }
          ],
          "default": "h2",
          "label": "Heading level"
        },
        {
          "type": "select",
          "id": "heading_size",
          "options": [
            {
              "value": "h0",
              "label": "XX Large"
            },
            {
              "value": "h1",
              "label": "X Large"
            },
            {
              "value": "h2",
              "label": "Large"
            },
            {
              "value": "h3",
              "label": "Base"
            },
            {
              "value": "h4",
              "label": "Small"
            },
            {
              "value": "h5",
              "label": "X Small"
            },
            {
              "value": "h6",
              "label": "XX Small"
            }
          ],
          "default": "h2",
          "label": "Heading size"
        },
        {
          "type": "select",
          "id": "heading_font",
          "options": [
            {
              "value": "staff-x-condensed-type",
              "label": "Staff X Condensed"
            },
            {
              "value": "modernist-type",
              "label": "Modernist"
            },
            {
              "value": "modernist-mono-type",
              "label": "Modernist Mono"
            },
            {
              "value": "roboto-mono-type",
              "label": "Roboto Mono"
            },
            {
              "value": "montserrat-type",
              "label": "Montserrat"
            }
          ],
          "default": "staff-x-condensed-type",
          "label": "Heading font family"
        },
        {
          "type": "select",
          "id": "heading_color",
          "options": [
            {
              "value": "color-white",
              "label": "White"
            },
            {
              "value": "color-black",
              "label": "Black"
            },
            {
              "value": "color-chocolate",
              "label": "Chocolate"
            },
            {
              "value": "color-chocolate-light",
              "label": "Chocolate Light"
            },
            {
              "value": "color-chocolate-mid",
              "label": "Chocolate Medium"
            },
            {
              "value": "color-chocolate-dark",
              "label": "Chocolate Dark"
            },
            {
              "value": "color-milk-chocolate",
              "label": "Milk Chocolate"
            },
            {
              "value": "color-shitake",
              "label": "Shitake"
            },
            {
              "value": "color-sage",
              "label": "Sage"
            },
            {
              "value": "color-sage-light",
              "label": "Sage light"
            },
            {
              "value": "color-cream",
              "label": "Cream"
            },
            {
              "value": "color-cream-light",
              "label": "Cream Light"
            },
            {
              "value": "color-yellow",
              "label": "Yellow"
            },
            {
              "value": "color-red",
              "label": "Red"
            }
          ],
          "default": "color-chocolate",
          "label": "Heading color"
        },
        {
          "type": "checkbox",
          "id": "heading_color_inverse",
          "label": "Light colors on mobile",
          "default": false
        },
        {
          "type": "select",
          "id": "heading_margin_top",
          "options": [
            {
              "value": "mg-t-xxl",
              "label": "XX Large"
            },
            {
              "value": "mg-t-xl",
              "label": "X Large"
            },
            {
              "value": "mg-t-l",
              "label": "Large"
            },
            {
              "value": "mg-t-m",
              "label": "Medium"
            },
            {
              "value": "mg-t-s",
              "label": "Small"
            },
            {
              "value": "mg-t-xs",
              "label": "X Small"
            },
            {
              "value": "mg-t-none",
              "label": "No margin"
            }
          ],
          "default": "mg-t-none",
          "label": "Heading margin top"
        },
        {
          "type": "select",
          "id": "heading_margin_bottom",
          "options": [
            {
              "value": "mg-b-xxl",
              "label": "XX Large"
            },
            {
              "value": "mg-b-xl",
              "label": "X Large"
            },
            {
              "value": "mg-b-l",
              "label": "Large"
            },
            {
              "value": "mg-b-m",
              "label": "Medium"
            },
            {
              "value": "mg-b-s",
              "label": "Small"
            },
            {
              "value": "mg-b-xs",
              "label": "X Small"
            },
            {
              "value": "mg-b-none",
              "label": "No margin"
            }
          ],
          "default": "mg-b-m",
          "label": "Heading margin bottom"
        },
        {
          "type": "checkbox",
          "id": "heading_underline",
          "label": "Underline",
          "default": false
        },
        {
          "type": "checkbox",
          "id": "line_break_dot",
          "label": "Break line only at dots",
          "default": false
        }
      ]
    },
    {
      "type": "text",
      "name": "Rich Text",
      "settings": [
        {
          "id": "paragraph",
          "type": "richtext",
          "label": "Paragraph text",
          "default": "<p>Lorem ipsum dolor sit amet consectetur adipiscing elit.</p>"
        },
        {
          "type": "select",
          "id": "paragraph_font",
          "options": [
            {
              "value": "staff-x-condensed-type",
              "label": "Staff X Condensed"
            },
            {
              "value": "modernist-type",
              "label": "Modernist"
            },
            {
              "value": "modernist-mono-type",
              "label": "Modernist Mono"
            },
            {
              "value": "roboto-mono-type",
              "label": "Roboto Mono"
            },
            {
              "value": "montserrat-type",
              "label": "Montserrat"
            }
          ],
          "default": "modernist-type",
          "label": "Paragraph font family"
        },
        {
          "type": "select",
          "id": "paragraph_style",
          "options": [
            {
              "value": "xxl",
              "label": "XX Large"
            },
            {
              "value": "xl",
              "label": "X Large"
            },
            {
              "value": "l",
              "label": "Large"
            },
            {
              "value": "m",
              "label": "Base"
            },
            {
              "value": "s",
              "label": "Small"
            },
            {
              "value": "xs",
              "label": "X Small"
            },
            {
              "value": "xxs",
              "label": "XX Small"
            }
          ],
          "default": "m",
          "label": "Paragraph size"
        },
        {
          "type": "select",
          "id": "paragraph_color",
          "options": [
            {
              "value": "color-white",
              "label": "White"
            },
            {
              "value": "color-black",
              "label": "Black"
            },
            {
              "value": "color-chocolate",
              "label": "Chocolate"
            },
            {
              "value": "color-chocolate-light",
              "label": "Chocolate Light"
            },
            {
              "value": "color-chocolate-mid",
              "label": "Chocolate Medium"
            },
            {
              "value": "color-chocolate-dark",
              "label": "Chocolate Dark"
            },
            {
              "value": "color-milk-chocolate",
              "label": "Milk Chocolate"
            },
            {
              "value": "color-shitake",
              "label": "Shitake"
            },
            {
              "value": "color-sage",
              "label": "Sage"
            },
            {
              "value": "color-sage-light",
              "label": "Sage light"
            },
            {
              "value": "color-cream",
              "label": "Cream"
            },
            {
              "value": "color-cream-light",
              "label": "Cream Light"
            },
            {
              "value": "color-yellow",
              "label": "Yellow"
            },
            {
              "value": "color-red",
              "label": "Red"
            }
          ],
          "default": "color-chocolate",
          "label": "Paragraph color"
        },
        {
          "type": "checkbox",
          "id": "paragraph_color_inverse",
          "label": "Light colors on mobile",
          "default": false
        },
        {
          "type": "select",
          "id": "paragraph_margin_top",
          "options": [
            {
              "value": "mg-t-xxl",
              "label": "XX Large"
            },
            {
              "value": "mg-t-xl",
              "label": "X Large"
            },
            {
              "value": "mg-t-l",
              "label": "Large"
            },
            {
              "value": "mg-t-m",
              "label": "Medium"
            },
            {
              "value": "mg-t-s",
              "label": "Small"
            },
            {
              "value": "mg-t-xs",
              "label": "X Small"
            },
            {
              "value": "mg-t-none",
              "label": "No margin"
            }
          ],
          "default": "mg-t-none",
          "label": "Paragraph margin top"
        },
        {
          "type": "select",
          "id": "paragraph_margin_bottom",
          "options": [
            {
              "value": "mg-b-xxl",
              "label": "XX Large"
            },
            {
              "value": "mg-b-xl",
              "label": "X Large"
            },
            {
              "value": "mg-b-l",
              "label": "Large"
            },
            {
              "value": "mg-b-m",
              "label": "Medium"
            },
            {
              "value": "mg-b-s",
              "label": "Small"
            },
            {
              "value": "mg-b-xs",
              "label": "X Small"
            },
            {
              "value": "mg-b-none",
              "label": "No margin"
            }
          ],
          "default": "mg-b-m",
          "label": "Paragraph margin bottom"
        }
      ]
    },
    {
      "type": "membership",
      "name": "Membership",
      "settings": [
        {
          "id": "membership_product",
          "type": "product",
          "label": "Product"
        },
        {
          "id": "membership_image",
          "type": "image_picker",
          "label": "Membership Image"
        },
        {
          "type": "select",
          "id": "button_color",
          "options": [
            {
              "value": "var(--brand-white)",
              "label": "Light"
            },
            {
              "value": "var(--brand-black)",
              "label": "Dark"
            },
            {
              "value": "var(--brand-yellow)",
              "label": "Yellow"
            },
            {
              "value": "var(--brand-red)",
              "label": "Red"
            }
          ],
          "default": "var(--brand-black)",
          "label": "Button text color"
        },
        {
          "type": "select",
          "id": "button_bg_color",
          "options": [
            {
              "value": "var(--brand-white)",
              "label": "Light"
            },
            {
              "value": "var(--brand-black)",
              "label": "Dark"
            },
            {
              "value": "var(--brand-yellow)",
              "label": "Yellow"
            },
            {
              "value": "var(--brand-red)",
              "label": "Red"
            }
          ],
          "default": "var(--brand-white)",
          "label": "Button background color"
        },
        {
          "type": "select",
          "id": "button_font",
          "options": [
            {
              "value": "staff-x",
              "label": "Staff X"
            },
            {
              "value": "modernist",
              "label": "Modernist"
            },
            {
              "value": "mono",
              "label": "Modernist Mono"
            },
            {
              "value": "roboto",
              "label": "Roboto"
            },
            {
              "value": "alkaline",
              "label": "Alkaline"
            },
            {
              "value": "chakra",
              "label": "Chakra"
            },
            {
              "value": "roboto-mono",
              "label": "Roboto Mono"
            }
          ],
          "default": "staff-x",
          "label": "Font"
        },
        {
          "type": "text",
          "id": "button_label",
          "default": "Button label",
          "label": "Button 1 label"
        },
        {
          "type": "checkbox",
          "id": "button_style_secondary",
          "default": false,
          "label": "Button inline style"
        }
      ]
    }
  ],
  "presets": [
    {
      "name": "Membership Banner",
      "settings": {},
      "blocks": [
        {
          "type": "heading"
        },
        {
          "type": "text"
        }
      ]
    }
  ]
}
{% endschema %}
